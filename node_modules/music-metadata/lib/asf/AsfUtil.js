"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Util_1 = require("../common/Util");
var AsfUtil = /** @class */ (function () {
    function AsfUtil() {
    }
    AsfUtil.getParserForAttr = function (i) {
        return AsfUtil.attributeParsers[i];
    };
    AsfUtil.parseUnicodeAttr = function (buf) {
        return Util_1.default.stripNulls(Util_1.default.decodeString(buf, "utf16le"));
    };
    /**
     * Best effort approach to read 64 but unsigned integer.
     * Note that JavasScript is limited to 2^53 - 1 bit.
     */
    AsfUtil.readUInt64LE = function (buf, offset) {
        if (offset === void 0) { offset = 0; }
        return Util_1.default.readUInt64LE(buf, offset);
    };
    AsfUtil.parseByteArrayAttr = function (buf) {
        var newBuf = Buffer.alloc(buf.length);
        buf.copy(newBuf);
        return newBuf;
    };
    AsfUtil.parseBoolAttr = function (buf, offset) {
        if (offset === void 0) { offset = 0; }
        return AsfUtil.parseWordAttr(buf, offset) === 1;
    };
    AsfUtil.parseDWordAttr = function (buf, offset) {
        if (offset === void 0) { offset = 0; }
        return buf.readUInt32LE(offset);
    };
    AsfUtil.parseQWordAttr = function (buf, offset) {
        if (offset === void 0) { offset = 0; }
        return AsfUtil.readUInt64LE(buf, offset);
    };
    AsfUtil.parseWordAttr = function (buf, offset) {
        if (offset === void 0) { offset = 0; }
        return buf.readUInt16LE(offset);
    };
    AsfUtil.attributeParsers = [
        AsfUtil.parseUnicodeAttr,
        AsfUtil.parseByteArrayAttr,
        AsfUtil.parseBoolAttr,
        AsfUtil.parseDWordAttr,
        AsfUtil.parseQWordAttr,
        AsfUtil.parseWordAttr,
        AsfUtil.parseByteArrayAttr
    ];
    return AsfUtil;
}());
exports.AsfUtil = AsfUtil;
